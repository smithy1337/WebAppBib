<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <meta charset="UTF-8"></meta>
        <link rel="stylesheet" type="text/css" href="style.css"></link>
        <title> RainbowUnicornLibrary </title>
    </h:head>
    <h:body>
        <div class="header">
            <div class="header-thumb"><a href="index.xhtml"><img src="res/giflogo.gif" alt="logo" /></a></div>
            <div class="header-content">
                <h1>Rainbow Unicorn Library</h1>
            </div>
        </div>
        <h:form id="formInput">
        <div class="in">
                <!-- <input type="text" name="search" placeholder="Search.."></input> -->
                <p:remoteCommand name="search" actionListener="#{managedSearchBean.search()}"/>
                <p:inputText id="searchInput" value="#{managedSearchBean.searchTerm}" 
                             onkeypress="if (event.keyCode === 13) {search(); return false; }"/>
                <h:commandButton value="Search" action="#{managedSearchBean.search()}" />
        </div>
        </h:form>
        <br/>
        <main>
            <div class="tabs">
                    <input id="tab1" type="radio" name="tabs"/>
                    <label for="tab1">Books</label>

                    <input id="tab2" type="radio" name="tabs"/>
                    <label for="tab2">DVDs</label>

                    <input id="tab3" type="radio" name="tabs"/>
                    <label for="tab3">Magazines</label>

                    <section id="content1">
                        <table>
                            <p:dataTable value="#{managedSearchBean.books}" var="media">
                               <p:column headerText="Title">
                                   <h:outputText value="#{media.title}" />
                               </p:column>
                               <p:column headerText="ISBN">
                                   <h:outputText value="#{media.isbn}" />
                               </p:column>
                               <p:column headerText="" style="width:32px;text-align: center">
                                   <p:commandLink value="View Detail"
                                                  type="button"
                                                  styleClass="ui-icon ui-icon-newwin"
                                                  immediate="true">
                                       <f:ajax render="detailDialogId" listener="#{managedSearchBean.getBooksByISBN(media.isbn)}"
                                               onevent="function(data) { PF('detailDialog').show(); }" />
                                   </p:commandLink>
                               </p:column>
                           </p:dataTable>
                            
                           <p:dialog styleClass="dialog" id="detailDialogId" widgetVar="detailDialog"
                                     modal="true" height="1000" width="1000"
                                     dynamic="true" resizable="false">

                                   <p:panel id="detailpanelID" header="Book Detail" style="text-align:center;">
                                       <h:panelGrid columns="2" cellpadding="5">
                                            <f:facet name="header">
                                                <p:graphicImage value="#{managedSearchBean.book.pictureURL}" width="300" height="250" style="vertical-align: middle;"/> 
                                            </f:facet>
                                           
                                            <h:outputText value="Title:" />
                                            <h:outputText value="#{managedSearchBean.book.title}" />

                                            <h:outputText value="Publisher:" />
                                            <h:outputText value="#{managedSearchBean.book.publisher}" />

                                            <h:outputText value="Author:" />
                                            <h:outputText value="#{managedSearchBean.book.author}"/>

                                            <h:outputText value="ISBN:" />
                                            <h:outputText value="#{managedSearchBean.book.isbn}" />
                                       </h:panelGrid>
                                       
                                       <p:dataTable value="#{managedSearchBean.isbnBooks}" var="isbnBooks">
                                                <p:column headerText="Edition">
                                                    <h:outputText value="#{isbnBooks.edition}" />
                                                </p:column>
                                                <p:column headerText="Shelf Position">
                                                    <h:outputText value="#{isbnBooks.shelfPos}" />
                                                </p:column>
                                                <p:column headerText="Status">
                                                    <h:outputText value="#{isbnBooks.status}" />
                                                </p:column>
                                        </p:dataTable>
                                   </p:panel>
                           </p:dialog>
                        </table>
                    </section>
                    
                    <section id="content2">
                        <table>
                            <p:dataTable value="#{managedSearchBean.dvds}" var="dvd">
                               <p:column headerText="Title">
                                   <h:outputText value="#{dvd.title}" />
                               </p:column>
                               <p:column headerText="Regisseur">
                                   <h:outputText value="#{dvd.regisseur}" />
                               </p:column>
                               <p:column headerText="" style="width:32px;text-align: center">
                                   <p:commandLink value="View Detail"
                                                  type="button"
                                                  styleClass="ui-icon ui-icon-newwin"
                                                  immediate="true">
                                       <f:ajax render="detailDVDId" listener="#{managedSearchBean.getDvdByTitle(dvd.title)}"
                                               onevent="function(data) { PF('detailDVD').show(); }" />
                                   </p:commandLink>
                               </p:column>
                           </p:dataTable>
                            
                           <p:dialog styleClass="dialog" id="detailDVDId" widgetVar="detailDVD"
                                     modal="true" height="1000" width="1000"
                                     dynamic="true" resizable="false">

                                   <p:panel id="detailpanelDVDID" header="Book Detail" style="text-align:center;">
                                       <h:panelGrid columns="2" cellpadding="5">
                                            <f:facet name="header">
                                                <p:graphicImage value="#{managedSearchBean.dvd.pictureURL}" width="300" height="250" style="vertical-align: middle;"/> 
                                            </f:facet>
                                           
                                            <h:outputText value="Title:" />
                                            <h:outputText value="#{managedSearchBean.dvd.title}" />

                                            <h:outputText value="Regisseur" />
                                            <h:outputText value="#{managedSearchBean.dvd.regisseur}" />
                                       </h:panelGrid>
                                       
                                       <p:dataTable value="#{managedSearchBean.titleDvds}" var="titleDvds">
                                                <p:column headerText="Shelf Position">
                                                    <h:outputText value="#{titleDvds.shelfPos}" />
                                                </p:column>
                                                <p:column headerText="Status">
                                                    <h:outputText value="#{titleDvds.status}" />
                                                </p:column>
                                        </p:dataTable>
                                   </p:panel>
                           </p:dialog>
                        </table>
                    </section>

                    <section id="content3">
                        <table>
                            <p:dataTable value="#{managedSearchBean.magazines}" var="magazine">
                               <p:column headerText="Title">
                                   <h:outputText value="#{magazine.title}" />
                               </p:column>
                               <p:column headerText="Edition">
                                   <h:outputText value="#{magazine.edition}" />
                               </p:column>
                               <p:column headerText="" style="width:32px;text-align: center">
                                   <p:commandLink value="View Detail"
                                                  type="button"
                                                  styleClass="ui-icon ui-icon-newwin"
                                                  immediate="true">
                                       <f:ajax render="detailMagazineId" listener="#{managedSearchBean.getMagazinesByTitleAndEdition(magazine.title, magazine.edition)}"
                                               onevent="function(data) { PF('detailMagazine').show(); }" />
                                   </p:commandLink>
                               </p:column>
                           </p:dataTable>
                            
                           <p:dialog styleClass="dialog" id="detailMagazineId" widgetVar="detailMagazine"
                                     modal="true" height="1000" width="1000"
                                     dynamic="true" resizable="false">

                                   <p:panel id="detailpanelMagazineID" header="Book Detail" style="text-align:center;">
                                       <h:panelGrid columns="2" cellpadding="5">
                                            <f:facet name="header">
                                                <p:graphicImage value="#{managedSearchBean.magazine.pictureURL}" width="300" height="250" style="vertical-align: middle;"/> 
                                            </f:facet>
                                           
                                            <h:outputText value="Title:" />
                                            <h:outputText value="#{managedSearchBean.magazine.title}" />

                                            <h:outputText value="Publisher:" />
                                            <h:outputText value="#{managedSearchBean.magazine.publisher}" />

                                            <h:outputText value="Edition" />
                                            <h:outputText value="#{managedSearchBean.magazine.edition}"/>
                                       </h:panelGrid>
                                       
                                       <p:dataTable value="#{managedSearchBean.titleMagazins}" var="titleMagazines">
                                                <p:column headerText="Shelf Position">
                                                    <h:outputText value="#{titleMagazines.shelfPos}" />
                                                </p:column>
                                                <p:column headerText="Status">
                                                    <h:outputText value="#{titleMagazines.status}" />
                                                </p:column>
                                        </p:dataTable>
                                   </p:panel>
                           </p:dialog>
                        </table>
                    </section>
            </div>
        </main>
    </h:body>
</html>
